<!DOCTYPE html>
<html>
<head>
  <title>Extreme Anime</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// üî• ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyC_hLvrqWjOMkuYxLv3nYz2w_3K6-te5l8",
  authDomain: "sohan-b3d3e.firebaseapp.com",
  projectId: "sohan-b3d3e",
  storageBucket: "sohan-b3d3e.firebasestorage.app",
  messagingSenderId: "30321240527",
  appId: "1:30321240527:web:ff4e862bb31f1a8bcb8aba"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// üîê Admin Password
const ADMIN_PASS = "1234";

// üîë Login
window.loginAdmin = function() {
  const pass = document.getElementById("adminPass").value;
  if(pass === ADMIN_PASS){
    document.getElementById("adminPanel").style.display="block";
    alert("Admin Login Success");
  } else {
    alert("Wrong Password");
  }
}

// ‚ûï Add Episode
window.addEpisode = async function(){
  const anime = document.getElementById("animeName").value;
  const ep = document.getElementById("epNumber").value;
  const link = document.getElementById("videoLink").value;

  await addDoc(collection(db,"episodes"),{
    anime: anime,
    episode: ep,
    video: link
  });

  alert("Episode Added");
  loadEpisodes();
}

// üì• Load Episodes
async function loadEpisodes(){
  const querySnapshot = await getDocs(collection(db,"episodes"));
  const container = document.getElementById("episodeList");
  container.innerHTML="";
  querySnapshot.forEach((docSnap)=>{
    const data = docSnap.data();
    container.innerHTML += `
      <div class="card">
        <h3>${data.anime} - EP ${data.episode}</h3>
        <a href="${data.video}" target="_blank">Watch</a>
        <br>
        <button onclick="deleteEpisode('${docSnap.id}')">Delete</button>
        <button onclick="editEpisode('${docSnap.id}','${data.episode}')">Edit</button>
      </div>
    `;
  });
}
window.onload = loadEpisodes;

// ‚ùå Delete
window.deleteEpisode = async function(id){
  await deleteDoc(doc(db,"episodes",id));
  alert("Deleted");
  loadEpisodes();
}

// ‚úèÔ∏è Edit
window.editEpisode = async function(id,oldEp){
  const newEp = prompt("New Episode Number:", oldEp);
  await updateDoc(doc(db,"episodes",id),{
    episode:newEp
  });
  alert("Updated");
  loadEpisodes();
}

  </script>

<style>
body{
  background:#0f0f1a;
  color:white;
  font-family:sans-serif;
}
h1{
  text-align:center;
  color:#ff2e63;
}
.card{
  background:#1c1c2e;
  padding:15px;
  margin:10px;
  border-radius:10px;
}
button{
  background:#ff2e63;
  border:none;
  padding:6px 10px;
  color:white;
  border-radius:5px;
  margin-top:5px;
}
input{
  padding:8px;
  margin:5px;
}
</style>

</head>
<body>

<h1>üî• Extreme Anime üî•</h1>

<h2>Admin Login</h2>
<input type="password" id="adminPass" placeholder="Enter Password">
<button onclick="loginAdmin()">Login</button>

<div id="adminPanel" style="display:none;">
<h2>Add Episode</h2>
<input id="animeName" placeholder="Anime Name"><br>
<input id="epNumber" placeholder="Episode Number"><br>
<input id="videoLink" placeholder="Video Link"><br>
<button onclick="addEpisode()">Add Episode</button>
</div>

<h2>All Episodes</h2>
<div id="episodeList"></div>

</body>
</html>
