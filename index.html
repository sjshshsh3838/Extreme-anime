<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Anime Website</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f172a;
  color:white;
}
header{
  background:linear-gradient(90deg,#9333ea,#6366f1);
  padding:15px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
}
.container{
  padding:15px;
}
.card{
  background:#1e293b;
  padding:15px;
  margin-bottom:15px;
  border-radius:15px;
  box-shadow:0 0 10px rgba(0,0,0,0.5);
}
button{
  padding:8px 12px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  margin-top:5px;
}
.addBtn{background:#22c55e;color:white;}
.deleteBtn{background:#ef4444;color:white;}
select{
  padding:6px;
  border-radius:6px;
  margin-top:5px;
}
input{
  width:100%;
  padding:8px;
  margin-bottom:8px;
  border-radius:8px;
  border:none;
}
iframe{
  width:100%;
  height:200px;
  border-radius:10px;
  margin-top:10px;
}
</style>
</head>

<body>

<header>ðŸ”¥ Premium Anime Website</header>

<div class="container">

<h3>Add Anime</h3>
<input type="text" id="title" placeholder="Anime Title">
<input type="text" id="episodes" placeholder="Episode Links (comma separated)">
<button class="addBtn" onclick="addAnime()">Add Anime</button>

<hr>

<div id="animeList"></div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC_hLvrqWjOMkuYxLv3nYz2w_3K6-te5l8",
  authDomain: "sohan-b3d3e.firebaseapp.com",
  projectId: "sohan-b3d3e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.addAnime = async function(){

  let title=document.getElementById("title").value;
  let episodes=document.getElementById("episodes").value.split(",");

  if(title=="" || episodes==""){
    alert("Fill all fields");
    return;
  }

  await addDoc(collection(db,"anime"),{
    title:title,
    episodes:episodes
  });

  document.getElementById("title").value="";
  document.getElementById("episodes").value="";

  loadAnime();
}

async function loadAnime(){
  const querySnapshot=await getDocs(collection(db,"anime"));
  let container=document.getElementById("animeList");
  container.innerHTML="";

  querySnapshot.forEach(docSnap=>{
    let data=docSnap.data();
    let id=docSnap.id;

    let div=document.createElement("div");
    div.className="card";

    let episodeOptions="";
    data.episodes.forEach((ep,index)=>{
      episodeOptions+=`<option value="${ep}">Episode ${index+1}</option>`;
    });

    div.innerHTML=`
      <h3>${data.title}</h3>
      <select onchange="playEpisode(this.value)">
        <option>Select Episode</option>
        ${episodeOptions}
      </select>
      <iframe></iframe>
      <br>
      <button class="deleteBtn" onclick="deleteAnime('${id}')">Delete</button>
    `;

    container.appendChild(div);
  });
}

window.playEpisode=function(link){
  let iframe=event.target.parentElement.querySelector("iframe");
  iframe.src=link;
}

window.deleteAnime=async function(id){
  await deleteDoc(doc(db,"anime",id));
  loadAnime();
}

loadAnime();

</script>

</body>
</html>
