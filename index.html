<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { 
  getDatabase, ref, push, onValue, remove, update 
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_AUTH",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_MSG_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const epRef = ref(db, "episodes");

window.addEpisode = function() {
  const number = document.getElementById("epNumber").value;
  const title = document.getElementById("epTitle").value;
  const video = document.getElementById("epVideo").value;

  push(epRef, { number, title, video });
  alert("Episode Added!");
}

onValue(epRef, (snapshot) => {
  const data = snapshot.val();
  const container = document.getElementById("episodeList");
  container.innerHTML = "";

  for (let id in data) {
    container.innerHTML += `
      <div>
        EP ${data[id].number} - ${data[id].title}
        <button onclick="editEpisode('${id}')">Edit</button>
        <button onclick="deleteEpisode('${id}')">Delete</button>
      </div>
    `;
  }
});

window.deleteEpisode = function(id){
  remove(ref(db, "episodes/" + id));
}

window.editEpisode = function(id){
  const newTitle = prompt("New Title:");
  const newNumber = prompt("New Number:");
  const newVideo = prompt("New Video:");

  update(ref(db, "episodes/" + id), {
    title: newTitle,
    number: newNumber,
    video: newVideo
  });
}

         </script>
