<!DOCTYPE html>
<html>
<head>
  <title>Anime Admin</title>
</head>
<body>

<h2>Add Episode</h2>

<input id="epNumber" placeholder="Episode Number"><br><br>
<input id="epTitle" placeholder="Episode Title"><br><br>
<input id="epVideo" placeholder="Video Link"><br><br>
<button onclick="addEpisode()">Add Episode</button>

<h3>Episodes</h3>
<div id="episodeList"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "PASTE_YOUR_KEY",
  authDomain: "PASTE_YOUR_AUTH",
  databaseURL: "PASTE_YOUR_DB_URL",
  projectId: "PASTE_YOUR_ID",
  storageBucket: "PASTE_YOUR_BUCKET",
  messagingSenderId: "PASTE_YOUR_MSG",
  appId: "PASTE_YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const epRef = ref(db, "episodes");

window.addEpisode = function() {
  const number = document.getElementById("epNumber").value;
  const title = document.getElementById("epTitle").value;
  const video = document.getElementById("epVideo").value;

  push(epRef, { number, title, video });
  alert("Added!");
}

onValue(epRef, (snapshot) => {
  const data = snapshot.val();
  const container = document.getElementById("episodeList");
  container.innerHTML = "";

  if(data){
    for (let id in data) {
      container.innerHTML += `<p>EP ${data[id].number} - ${data[id].title}</p>`;
    }
  }
});

</script>

</body>
</html>
